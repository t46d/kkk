<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VeXachat - Free Chat & Dating Platform</title>
    
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: #0A0A0A;
            color: #EAEAEA;
            min-height: 100vh;
            direction: ltr;
        }

        /* Header */
        .header {
            background: rgba(10, 10, 10, 0.95);
            border-bottom: 1px solid rgba(0, 240, 255, 0.3);
            padding: 15px 30px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            backdrop-filter: blur(20px);
            position: sticky;
            top: 0;
            z-index: 1000;
        }

        .logo {
            font-size: 1.8rem;
            font-weight: 900;
            background: linear-gradient(135deg, #00F0FF, #FF00C8);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .username {
            color: #00F0FF;
            font-weight: 600;
        }

        .logout-btn {
            background: rgba(255, 71, 87, 0.1);
            border: 1px solid rgba(255, 71, 87, 0.3);
            color: #FF4757;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            transition: all 0.3s;
        }

        .logout-btn:hover {
            background: rgba(255, 71, 87, 0.2);
        }

        /* Language Switcher */
        .language-switcher {
            display: flex;
            gap: 5px;
        }

        .lang-btn-small {
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 240, 255, 0.2);
            color: #9AA0A6;
            padding: 5px 8px;
            border-radius: 4px;
            cursor: pointer;
            font-size: 0.7rem;
            transition: all 0.3s;
        }

        .lang-btn-small.active {
            background: rgba(0, 240, 255, 0.1);
            color: #00F0FF;
            border-color: #00F0FF;
        }

        /* Main Container */
        .main-container {
            display: flex;
            min-height: calc(100vh - 70px);
        }

        /* Left Sidebar - User List */
        .sidebar {
            width: 300px;
            background: rgba(20, 20, 20, 0.9);
            border-right: 1px solid rgba(0, 240, 255, 0.2);
            padding: 20px 0;
        }

        .search-box {
            padding: 0 20px 20px;
        }

        .search-input {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 240, 255, 0.3);
            border-radius: 8px;
            color: #EAEAEA;
            font-size: 14px;
        }

        .user-list {
            max-height: calc(100vh - 150px);
            overflow-y: auto;
        }

        .user-item {
            padding: 15px 20px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.1);
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .user-item:hover {
            background: rgba(0, 240, 255, 0.05);
        }

        .user-item.active {
            background: rgba(0, 240, 255, 0.1);
            border-left: 3px solid #00F0FF;
        }

        .user-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00F0FF, #FF00C8);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
        }

        .user-details h4 {
            color: #00F0FF;
            margin-bottom: 5px;
        }

        .user-details p {
            color: #9AA0A6;
            font-size: 0.9rem;
        }

        /* Main Chat Area */
        .chat-area {
            flex: 1;
            display: flex;
            flex-direction: column;
        }

        .chat-header {
            padding: 20px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.2);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .chat-user-info {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .chat-user-info h3 {
            color: #00F0FF;
        }

        .chat-user-info p {
            color: #9AA0A6;
            font-size: 0.9rem;
        }

        .chat-actions button {
            background: rgba(0, 240, 255, 0.1);
            border: 1px solid rgba(0, 240, 255, 0.3);
            color: #00F0FF;
            padding: 8px 15px;
            border-radius: 6px;
            cursor: pointer;
            margin-left: 10px;
            transition: all 0.3s;
        }

        .chat-actions button:hover {
            background: rgba(0, 240, 255, 0.2);
        }

        .messages-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .message {
            max-width: 70%;
            padding: 12px 15px;
            border-radius: 15px;
            position: relative;
        }

        .message.received {
            background: rgba(0, 240, 255, 0.1);
            align-self: flex-start;
            border-bottom-left-radius: 5px;
        }

        .message.sent {
            background: linear-gradient(135deg, #00F0FF, #FF00C8);
            color: #0A0A0A;
            align-self: flex-end;
            border-bottom-right-radius: 5px;
        }

        .message-time {
            font-size: 0.7rem;
            color: #9AA0A6;
            margin-top: 5px;
            text-align: right;
        }

        .message.sent .message-time {
            color: rgba(10, 10, 10, 0.7);
        }

        /* Message Input */
        .message-input-container {
            padding: 20px;
            border-top: 1px solid rgba(0, 240, 255, 0.2);
            display: flex;
            gap: 10px;
        }

        .message-input {
            flex: 1;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.05);
            border: 1px solid rgba(0, 240, 255, 0.3);
            border-radius: 8px;
            color: #EAEAEA;
            font-size: 14px;
        }

        .send-btn {
            background: linear-gradient(135deg, #00F0FF, #FF00C8);
            border: none;
            border-radius: 8px;
            color: #0A0A0A;
            padding: 0 25px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(0, 240, 255, 0.3);
        }

        /* Right Sidebar - User Profile */
        .profile-sidebar {
            width: 300px;
            background: rgba(20, 20, 20, 0.9);
            border-left: 1px solid rgba(0, 240, 255, 0.2);
            padding: 20px;
        }

        .profile-header {
            text-align: center;
            margin-bottom: 30px;
        }

        .profile-avatar {
            width: 120px;
            height: 120px;
            border-radius: 50%;
            background: linear-gradient(135deg, #00F0FF, #FF00C8);
            margin: 0 auto 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 3rem;
            border: 3px solid rgba(0, 240, 255, 0.3);
        }

        .profile-name {
            color: #00F0FF;
            font-size: 1.5rem;
            margin-bottom: 5px;
        }

        .profile-info {
            margin-bottom: 25px;
        }

        .info-item {
            margin-bottom: 15px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(0, 240, 255, 0.1);
        }

        .info-label {
            color: #9AA0A6;
            font-size: 0.8rem;
            margin-bottom: 5px;
            text-transform: uppercase;
        }

        .info-value {
            color: #EAEAEA;
            font-size: 1rem;
        }

        .whatsapp-btn {
            width: 100%;
            padding: 12px;
            background: linear-gradient(135deg, #25D366, #1EBEA5);
            border: none;
            border-radius: 8px;
            color: white;
            font-weight: 600;
            cursor: pointer;
            margin-bottom: 15px;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
        }

        .whatsapp-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(37, 211, 102, 0.3);
        }

        /* Gallery */
        .gallery-section {
            margin-top: 30px;
        }

        .gallery-title {
            color: #00F0FF;
            margin-bottom: 15px;
            font-size: 1.2rem;
        }

        .gallery-grid {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
        }

        .gallery-item {
            aspect-ratio: 1;
            border-radius: 8px;
            background: rgba(255, 255, 255, 0.05);
            cursor: pointer;
            transition: all 0.3s;
            overflow: hidden;
        }

        .gallery-item:hover {
            transform: scale(1.05);
            border: 2px solid #00F0FF;
        }

        /* Responsive */
        @media (max-width: 1024px) {
            .profile-sidebar {
                display: none;
            }
            
            .sidebar {
                width: 250px;
            }
        }

        @media (max-width: 768px) {
            .main-container {
                flex-direction: column;
            }
            
            .sidebar {
                width: 100%;
                height: 300px;
                border-right: none;
                border-bottom: 1px solid rgba(0, 240, 255, 0.2);
            }
            
            .user-list {
                max-height: 200px;
            }
            
            .chat-actions {
                display: none;
            }
        }
    </style>
    
    <!-- Font Awesome -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="logo">VeXachat</div>
        
        <div class="language-switcher">
            <button class="lang-btn-small active" onclick="setLanguage('en')">EN</button>
            <button class="lang-btn-small" onclick="setLanguage('ar')">AR</button>
            <button class="lang-btn-small" onclick="setLanguage('th')">TH</button>
            <button class="lang-btn-small" onclick="setLanguage('ru')">RU</button>
        </div>
        
        <div class="user-info">
            <span class="username" id="currentUser">Guest</span>
            <button class="logout-btn" onclick="logout()">
                <i class="fas fa-sign-out-alt"></i> Logout
            </button>
        </div>
    </header>

    <!-- Main Container -->
    <div class="main-container">
        <!-- Left Sidebar - User List -->
        <aside class="sidebar">
            <div class="search-box">
                <input type="text" class="search-input" placeholder="Search users..." id="searchUsers">
            </div>
            <div class="user-list" id="userList">
                <!-- Users will be loaded here -->
            </div>
        </aside>

        <!-- Main Chat Area -->
        <main class="chat-area">
            <div class="chat-header">
                <div class="chat-user-info" id="currentChatUser">
                    <div class="user-avatar">üë§</div>
                    <div>
                        <h3>Select a user to chat</h3>
                        <p>Click on a user from the list to start chatting</p>
                    </div>
                </div>
                <div class="chat-actions">
                    <button onclick="viewProfile()"><i class="fas fa-user"></i> Profile</button>
                    <button onclick="clearChat()"><i class="fas fa-trash"></i> Clear</button>
                </div>
            </div>
            
            <div class="messages-container" id="messagesContainer">
                <!-- Messages will appear here -->
                <div style="text-align: center; color: #9AA0A6; margin-top: 50px;">
                    <i class="fas fa-comments" style="font-size: 3rem; margin-bottom: 20px;"></i>
                    <h3>No messages yet</h3>
                    <p>Select a user and start chatting</p>
                </div>
            </div>
            
            <div class="message-input-container">
                <input type="text" class="message-input" placeholder="Type your message here..." id="messageInput">
                <button class="send-btn" onclick="sendMessage()">Send</button>
            </div>
        </main>

        <!-- Right Sidebar - User Profile -->
        <aside class="profile-sidebar" id="profileSidebar">
            <div class="profile-header">
                <div class="profile-avatar">üë§</div>
                <h2 class="profile-name" id="profileName">User Name</h2>
                <p style="color: #9AA0A6;" id="profileAge">Age: --</p>
            </div>
            
            <div class="profile-info">
                <div class="info-item">
                    <div class="info-label">Location</div>
                    <div class="info-value" id="profileLocation">Not specified</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">Phone Number</div>
                    <div class="info-value" id="profilePhone">Click to reveal</div>
                </div>
                
                <div class="info-item">
                    <div class="info-label">WhatsApp</div>
                    <button class="whatsapp-btn" onclick="openWhatsApp()">
                        <i class="fab fa-whatsapp"></i> Open WhatsApp Chat
                    </button>
                </div>
                
                <div class="info-item">
                    <div class="info-label">About</div>
                    <div class="info-value" id="profileAbout">No description provided</div>
                </div>
            </div>
            
            <div class="gallery-section">
                <h3 class="gallery-title">Photo Gallery</h3>
                <div class="gallery-grid" id="profileGallery">
                    <!-- Gallery images will appear here -->
                </div>
            </div>
        </aside>
    </div>

    <!-- Login Modal -->
    <div id="loginModal" style="display:flex; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; align-items:center; justify-content:center;">
        <div style="background:#1a1a1a; padding:40px; border-radius:15px; max-width:400px; width:90%; border:2px solid rgba(0,240,255,0.3);">
            <h2 style="color:#00F0FF; margin-bottom:30px; text-align:center;">üîê User Login</h2>
            
            <div style="margin-bottom:20px;">
                <label style="display:block; color:#00F0FF; margin-bottom:8px;">Username</label>
                <input type="text" id="loginUsername" style="width:100%; padding:12px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:8px; color:white; font-size:16px;" placeholder="Enter your username">
            </div>
            
            <div style="margin-bottom:20px;">
                <label style="display:block; color:#00F0FF; margin-bottom:8px;">Password</label>
                <input type="password" id="loginPassword" style="width:100%; padding:12px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:8px; color:white; font-size:16px;" placeholder="Enter your password">
            </div>
            
            <div style="margin-bottom:30px; text-align:center;">
                <a href="javascript:void(0)" onclick="showRegister()" style="color:#00F0FF; text-decoration:none;">Don't have an account? Register</a>
            </div>
            
            <div style="display:flex; gap:10px;">
                <button onclick="userLogin()" style="flex:1; padding:15px; background:linear-gradient(135deg, #00F0FF, #FF00C8); border:none; border-radius:8px; color:black; font-weight:bold; font-size:16px; cursor:pointer;">
                    Login
                </button>
                <button onclick="guestLogin()" style="flex:1; padding:15px; background:#333; border:none; border-radius:8px; color:white; font-size:16px; cursor:pointer;">
                    Continue as Guest
                </button>
            </div>
        </div>
    </div>

    <!-- Register Modal -->
    <div id="registerModal" style="display:none; position:fixed; top:0; left:0; width:100%; height:100%; background:rgba(0,0,0,0.95); z-index:2000; align-items:center; justify-content:center;">
        <div style="background:#1a1a1a; padding:40px; border-radius:15px; max-width:500px; width:90%; border:2px solid rgba(0,240,255,0.3);">
            <h2 style="color:#00F0FF; margin-bottom:30px; text-align:center;">üìù Create Account</h2>
            
            <div style="margin-bottom:15px;">
                <label style="display:block; color:#00F0FF; margin-bottom:5px; font-size:0.9rem;">Username</label>
                <input type="text" id="regUsername" style="width:100%; padding:10px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:6px; color:white; font-size:14px;" placeholder="Choose a username">
            </div>
            
            <div style="margin-bottom:15px;">
                <label style="display:block; color:#00F0FF; margin-bottom:5px; font-size:0.9rem;">Password</label>
                <input type="password" id="regPassword" style="width:100%; padding:10px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:6px; color:white; font-size:14px;" placeholder="Create a password">
            </div>
            
            <div style="margin-bottom:15px;">
                <label style="display:block; color:#00F0FF; margin-bottom:5px; font-size:0.9rem;">Age</label>
                <input type="number" id="regAge" style="width:100%; padding:10px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:6px; color:white; font-size:14px;" placeholder="18+" min="18" max="100">
            </div>
            
            <div style="margin-bottom:15px;">
                <label style="display:block; color:#00F0FF; margin-bottom:5px; font-size:0.9rem;">Gender</label>
                <select id="regGender" style="width:100%; padding:10px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:6px; color:white; font-size:14px;">
                    <option value="male">Male</option>
                    <option value="female">Female</option>
                    <option value="other">Other</option>
                </select>
            </div>
            
            <div style="margin-bottom:25px;">
                <label style="display:block; color:#00F0FF; margin-bottom:5px; font-size:0.9rem;">Phone (WhatsApp)</label>
                <input type="tel" id="regPhone" style="width:100%; padding:10px; background:#2a2a2a; border:1px solid #00F0FF; border-radius:6px; color:white; font-size:14px;" placeholder="+1234567890">
            </div>
            
            <div style="display:flex; gap:10px;">
                <button onclick="userRegister()" style="flex:1; padding:15px; background:linear-gradient(135deg, #00F0FF, #FF00C8); border:none; border-radius:8px; color:black; font-weight:bold; font-size:16px; cursor:pointer;">
                    Create Account
                </button>
                <button onclick="hideRegister()" style="flex:1; padding:15px; background:#333; border:none; border-radius:8px; color:white; font-size:16px; cursor:pointer;">
                    Cancel
                </button>
            </div>
        </div>
    </div>

    <script>
        // Check if user is logged in
        function checkUserLogin() {
            const isLoggedIn = localStorage.getItem('user_logged_in');
            const username = localStorage.getItem('user_username');
            
            if (!isLoggedIn || isLoggedIn !== 'true' || !username) {
                document.getElementById('loginModal').style.display = 'flex';
                return false;
            }
            
            document.getElementById('currentUser').textContent = username;
            document.getElementById('loginModal').style.display = 'none';
            loadUserList();
            return true;
        }

        // Initialize
        document.addEventListener('DOMContentLoaded', function() {
            checkUserLogin();
            
            // Set up message input to send on Enter
            document.getElementById('messageInput').addEventListener('keypress', function(e) {
                if (e.key === 'Enter') {
                    sendMessage();
                }
            });
            
            // Set up search
            document.getElementById('searchUsers').addEventListener('input', function(e) {
                searchUsers(e.target.value);
            });
            
            // Load language preference
            const lang = localStorage.getItem('preferred_language') || 'en';
            setLanguage(lang, false);
        });

        // Language Functions
        function setLanguage(lang, showAlert = true) {
            // Update active button
            document.querySelectorAll('.lang-btn-small').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelectorAll('.lang-btn-small').forEach(btn => {
                if (btn.textContent.includes(lang.toUpperCase())) {
                    btn.classList.add('active');
                }
            });
            
            // Save language preference
            localStorage.setItem('preferred_language', lang);
            
            // Update UI text based on language
            updateUIText(lang);
            
            if (showAlert) {
                const messages = {
                    en: 'Language changed to English',
                    ar: 'ÿ™ŸÖ ÿ™ÿ∫ŸäŸäÿ± ÿßŸÑŸÑÿ∫ÿ© ÿ•ŸÑŸâ ÿßŸÑÿπÿ±ÿ®Ÿäÿ©',
                    th: '‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô‡∏†‡∏≤‡∏©‡∏≤‡πÄ‡∏õ‡πá‡∏ô‡πÑ‡∏ó‡∏¢',
                    ru: '–Ø–∑—ã–∫ –∏–∑–º–µ–Ω–µ–Ω –Ω–∞ —Ä—É—Å—Å–∫–∏–π'
                };
                alert(`üåê ${messages[lang]}`);
            }
        }

        function updateUIText(lang) {
            const translations = {
                en: {
                    searchPlaceholder: 'Search users...',
                    noMessages: 'No messages yet',
                    selectUser: 'Select a user and start chatting',
                    typeMessage: 'Type your message here...',
                    send: 'Send',
                    profile: 'Profile',
                    clear: 'Clear',
                    selectUserTitle: 'Select a user to chat',
                    selectUserDesc: 'Click on a user from the list to start chatting'
                },
                ar: {
                    searchPlaceholder: 'ÿßÿ®ÿ≠ÿ´ ÿπŸÜ ŸÖÿ≥ÿ™ÿÆÿØŸÖŸäŸÜ...',
                    noMessages: 'ŸÑÿß ÿ™Ÿàÿ¨ÿØ ÿ±ÿ≥ÿßÿ¶ŸÑ ÿ®ÿπÿØ',
                    selectUser: 'ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ÿÆÿØŸÖ Ÿàÿßÿ®ÿØÿ£ ÿßŸÑÿØÿ±ÿØÿ¥ÿ©',
                    typeMessage: 'ÿßŸÉÿ™ÿ® ÿ±ÿ≥ÿßŸÑÿ™ŸÉ ŸáŸÜÿß...',
                    send: 'ÿ•ÿ±ÿ≥ÿßŸÑ',
                    profile: 'ÿßŸÑŸÖŸÑŸÅ',
                    clear: 'ŸÖÿ≥ÿ≠',
                    selectUserTitle: 'ÿßÿÆÿ™ÿ± ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÑŸÑÿØÿ±ÿØÿ¥ÿ©',
                    selectUserDesc: 'ÿßŸÜŸÇÿ± ÿπŸÑŸâ ŸÖÿ≥ÿ™ÿÆÿØŸÖ ŸÖŸÜ ÿßŸÑŸÇÿßÿ¶ŸÖÿ© ŸÑÿ®ÿØÿ° ÿßŸÑÿØÿ±ÿØÿ¥ÿ©'
                },
                th: {
                    searchPlaceholder: '‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ...',
                    noMessages: '‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏°‡∏µ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°',
                    selectUser: '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÅ‡∏•‡∏∞‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ä‡∏ó',
                    typeMessage: '‡∏û‡∏¥‡∏°‡∏û‡πå‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏Ñ‡∏∏‡∏ì‡∏ó‡∏µ‡πà‡∏ô‡∏µ‡πà...',
                    send: '‡∏™‡πà‡∏á',
                    profile: '‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå',
                    clear: '‡∏•‡πâ‡∏≤‡∏á',
                    selectUserTitle: '‡πÄ‡∏•‡∏∑‡∏≠‡∏Å‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÅ‡∏ä‡∏ó',
                    selectUserDesc: '‡∏Ñ‡∏•‡∏¥‡∏Å‡∏ó‡∏µ‡πà‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏à‡∏≤‡∏Å‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÄ‡∏û‡∏∑‡πà‡∏≠‡πÄ‡∏£‡∏¥‡πà‡∏°‡πÅ‡∏ä‡∏ó'
                },
                ru: {
                    searchPlaceholder: '–ü–æ–∏—Å–∫ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π...',
                    noMessages: '–ü–æ–∫–∞ –Ω–µ—Ç —Å–æ–æ–±—â–µ–Ω–∏–π',
                    selectUser: '–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏ –Ω–∞—á–Ω–∏—Ç–µ —á–∞—Ç',
                    typeMessage: '–í–≤–µ–¥–∏—Ç–µ –≤–∞—à–µ —Å–æ–æ–±—â–µ–Ω–∏–µ –∑–¥–µ—Å—å...',
                    send: '–û—Ç–ø—Ä–∞–≤–∏—Ç—å',
                    profile: '–ü—Ä–æ—Ñ–∏–ª—å',
                    clear: '–û—á–∏—Å—Ç–∏—Ç—å',
                    selectUserTitle: '–í—ã–±–µ—Ä–∏—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–ª—è —á–∞—Ç–∞',
                    selectUserDesc: '–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–∑ —Å–ø–∏—Å–∫–∞, —á—Ç–æ–±—ã –Ω–∞—á–∞—Ç—å —á–∞—Ç'
                }
            };
            
            const t = translations[lang] || translations.en;
            
            // Update UI elements
            document.getElementById('searchUsers').placeholder = t.searchPlaceholder;
            document.getElementById('messageInput').placeholder = t.typeMessage;
            document.querySelector('.send-btn').textContent = t.send;
            document.querySelector('.chat-actions button:nth-child(1)').innerHTML = `<i class="fas fa-user"></i> ${t.profile}`;
            document.querySelector('.chat-actions button:nth-child(2)').innerHTML = `<i class="fas fa-trash"></i> ${t.clear}`;
            
            // Update no messages text
            const noMessages = document.querySelector('.messages-container > div');
            if (noMessages) {
                noMessages.querySelector('h3').textContent = t.noMessages;
                noMessages.querySelector('p').textContent = t.selectUser;
            }
            
            // Update chat header
            const chatHeader = document.querySelector('.chat-user-info');
            if (chatHeader.querySelector('h3').textContent.includes('Select')) {
                chatHeader.querySelector('h3').textContent = t.selectUserTitle;
                chatHeader.querySelector('p').textContent = t.selectUserDesc;
            }
        }

        // Login Functions
        function userLogin() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            
            if (!username || !password) {
                alert('Please enter both username and password');
                return;
            }
            
            // In production, this would be an API call
            // For demo, use localStorage
            const users = JSON.parse(localStorage.getItem('vexachat_users') || '{}');
            
            if (!users[username]) {
                alert('Username not found');
                return;
            }
            
            if (users[username].password !== password) {
                alert('Incorrect password');
                return;
            }
            
            // Login successful
            localStorage.setItem('user_logged_in', 'true');
            localStorage.setItem('user_username', username);
            localStorage.setItem('user_data', JSON.stringify(users[username]));
            
            document.getElementById('currentUser').textContent = username;
            document.getElementById('loginModal').style.display = 'none';
            
            loadUserList();
        }

        function guestLogin() {
            const guestId = 'guest_' + Date.now();
            localStorage.setItem('user_logged_in', 'true');
            localStorage.setItem('user_username', 'Guest');
            localStorage.setItem('user_guest', 'true');
            
            document.getElementById('currentUser').textContent = 'Guest';
            document.getElementById('loginModal').style.display = 'none';
            
            loadUserList();
        }

        function showRegister() {
            document.getElementById('loginModal').style.display = 'none';
            document.getElementById('registerModal').style.display = 'flex';
        }

        function hideRegister() {
            document.getElementById('registerModal').style.display = 'none';
            document.getElementById('loginModal').style.display = 'flex';
        }

        function userRegister() {
            const username = document.getElementById('regUsername').value;
            const password = document.getElementById('regPassword').value;
            const age = document.getElementById('regAge').value;
            const gender = document.getElementById('regGender').value;
            const phone = document.getElementById('regPhone').value;
            
            if (!username || !password || !age) {
                alert('Please fill in all required fields');
                return;
            }
            
            if (parseInt(age) < 18) {
                alert('You must be 18 years or older to register');
                return;
            }
            
            // Check if username exists
            const users = JSON.parse(localStorage.getItem('vexachat_users') || '{}');
            if (users[username]) {
                alert('Username already exists');
                return;
            }
            
            // Create user
            const userData = {
                username: username,
                password: password,
                age: age,
                gender: gender,
                phone: phone,
                created: new Date().toISOString(),
                bio: 'Hello! I\'m new to VeXachat',
                location: 'Not specified',
                gallery: []
            };
            
            users[username] = userData;
            localStorage.setItem('vexachat_users', JSON.stringify(users));
            
            // Auto login
            localStorage.setItem('user_logged_in', 'true');
            localStorage.setItem('user_username', username);
            localStorage.setItem('user_data', JSON.stringify(userData));
            
            alert('Account created successfully!');
            document.getElementById('registerModal').style.display = 'none';
            document.getElementById('currentUser').textContent = username;
            
            loadUserList();
            
            // Clear form
            document.getElementById('regUsername').value = '';
            document.getElementById('regPassword').value = '';
            document.getElementById('regAge').value = '';
            document.getElementById('regPhone').value = '';
        }

        // Load User List
        function loadUserList() {
            const userList = document.getElementById('userList');
            userList.innerHTML = '';
            
            // Sample users for demo
            const sampleUsers = [
                {id: 1, username: 'Sarah24', age: 24, gender: 'female', location: 'New York', online: true},
                {id: 2, username: 'Mike_88', age: 35, gender: 'male', location: 'London', online: true},
                {id: 3, username: 'Anna_Thai', age: 28, gender: 'female', location: 'Bangkok', online: false},
                {id: 4, username: 'Alex_RU', age: 32, gender: 'male', location: 'Moscow', online: true},
                {id: 5, username: 'Lily_18', age: 22, gender: 'female', location: 'Paris', online: false},
                {id: 6, username: 'David_91', age: 30, gender: 'male', location: 'Berlin', online: true},
                {id: 7, username: 'Sophia_99', age: 26, gender: 'female', location: 'Madrid', online: true}
            ];
            
            sampleUsers.forEach(user => {
                const userItem = document.createElement('div');
                userItem.className = 'user-item';
                userItem.innerHTML = `
                    <div class="user-avatar">${user.gender === 'female' ? 'üë©' : 'üë®'}</div>
                    <div class="user-details">
                        <h4>${user.username} ${user.online ? 'üü¢' : '‚ö´'}</h4>
                        <p>${user.age} ‚Ä¢ ${user.location}</p>
                    </div>
                `;
                
                userItem.addEventListener('click', () => {
                    // Remove active class from all
                    document.querySelectorAll('.user-item').forEach(item => {
                        item.classList.remove('active');
                    });
                    
                    // Add active to clicked
                    userItem.classList.add('active');
                    
                    // Load chat with this user
                    loadChat(user);
                    loadProfile(user);
                });
                
                userList.appendChild(userItem);
            });
        }

        function searchUsers(query) {
            const users = document.querySelectorAll('.user-item');
            users.forEach(user => {
                const username = user.querySelector('h4').textContent.toLowerCase();
                if (username.includes(query.toLowerCase())) {
                    user.style.display = 'flex';
                } else {
                    user.style.display = 'none';
                }
            });
        }

        // Chat Functions
        let currentChatUser = null;

        function loadChat(user) {
            currentChatUser = user;
            
            // Update chat header
            document.querySelector('.chat-user-info').innerHTML = `
                <div class="user-avatar">${user.gender === 'female' ? 'üë©' : 'üë®'}</div>
                <div>
                    <h3>${user.username} ${user.online ? 'üü¢' : '‚ö´'}</h3>
                    <p>${user.age} ‚Ä¢ ${user.location}</p>
                </div>
            `;
            
            // Load messages
            loadMessages(user);
        }

        function loadMessages(user) {
            const container = document.getElementById('messagesContainer');
            container.innerHTML = '';
            
            // Sample messages for demo
            const messages = [
                {id: 1, text: 'Hello! How are you?', sender: 'them', time: '10:30 AM'},
                {id: 2, text: 'I\'m good, thanks! How about you?', sender: 'me', time: '10:31 AM'},
                {id: 3, text: 'Doing great! What are your hobbies?', sender: 'them', time: '10:32 AM'},
                {id: 4, text: 'I love traveling and photography üì∑', sender: 'me', time: '10:33 AM'},
                {id: 5, text: 'That\'s awesome! I love photography too!', sender: 'them', time: '10:34 AM'}
            ];
            
            messages.forEach(msg => {
                const messageDiv = document.createElement('div');
                messageDiv.className = `message ${msg.sender === 'me' ? 'sent' : 'received'}`;
                messageDiv.innerHTML = `
                    <div>${msg.text}</div>
                    <div class="message-time">${msg.time}</div>
                `;
                container.appendChild(messageDiv);
            });
            
            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
        }

        function sendMessage() {
            const input = document.getElementById('messageInput');
            const message = input.value.trim();
            
            if (!message) return;
            
            if (!currentChatUser) {
                alert('Please select a user to chat with first');
                return;
            }
            
            const container = document.getElementById('messagesContainer');
            
            // Create message element
            const now = new Date();
            const timeString = now.getHours().toString().padStart(2, '0') + ':' + 
                             now.getMinutes().toString().padStart(2, '0');
            
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message sent';
            messageDiv.innerHTML = `
                <div>${message}</div>
                <div class="message-time">${timeString}</div>
            `;
            
            container.appendChild(messageDiv);
            input.value = '';
            
            // Scroll to bottom
            container.scrollTop = container.scrollHeight;
            
            // Simulate reply after 1 second
            setTimeout(() => {
                const replies = [
                    'That\'s interesting!',
                    'Tell me more about that',
                    'I agree with you',
                    'Nice! üòä',
                    'Thanks for sharing'
                ];
                
                const randomReply = replies[Math.floor(Math.random() * replies.length)];
                const replyTime = new Date();
                const replyTimeString = replyTime.getHours().toString().padStart(2, '0') + ':' + 
                                      replyTime.getMinutes().toString().padStart(2, '0');
                
                const replyDiv = document.createElement('div');
                replyDiv.className = 'message received';
                replyDiv.innerHTML = `
                    <div>${randomReply}</div>
                    <div class="message-time">${replyTimeString}</div>
                `;
                
                container.appendChild(replyDiv);
                container.scrollTop = container.scrollHeight;
            }, 1000);
        }

        // Profile Functions
        function loadProfile(user) {
            document.getElementById('profileName').textContent = user.username;
            document.getElementById('profileAge').textContent = `Age: ${user.age}`;
            document.getElementById('profileLocation').textContent = user.location;
            document.getElementById('profilePhone').textContent = '+1 234 567 8900';
            document.getElementById('profileAbout').textContent = 'Loves traveling, photography, and meeting new people. Looking for meaningful connections.';
            
            // Load gallery
            const gallery = document.getElementById('profileGallery');
            gallery.innerHTML = '';
            
            // Sample gallery images
            for (let i = 1; i <= 6; i++) {
                const galleryItem = document.createElement('div');
                galleryItem.className = 'gallery-item';
                galleryItem.style.background = `linear-gradient(135deg, 
                    hsl(${Math.random() * 360}, 70%, 50%), 
                    hsl(${Math.random() * 360}, 70%, 30%))`;
                galleryItem.title = `Photo ${i}`;
                gallery.appendChild(galleryItem);
            }
        }

        function viewProfile() {
            if (!currentChatUser) {
                alert('Please select a user first');
                return;
            }
            
            document.getElementById('profileSidebar').scrollIntoView({behavior: 'smooth'});
        }

        function openWhatsApp() {
            const phone = '+1234567890'; // Replace with actual phone
            const message = 'Hello from VeXachat!';
            const url = `https://wa.me/${phone}?text=${encodeURIComponent(message)}`;
            window.open(url, '_blank');
        }

        function clearChat() {
            if (!currentChatUser) return;
            
            if (confirm('Are you sure you want to clear all messages?')) {
                document.getElementById('messagesContainer').innerHTML = `
                    <div style="text-align: center; color: #9AA0A6; margin-top: 50px;">
                        <i class="fas fa-comments" style="font-size: 3rem; margin-bottom: 20px;"></i>
                        <h3>Chat cleared</h3>
                        <p>Start a new conversation</p>
                    </div>
                `;
            }
        }

        function logout() {
            localStorage.removeItem('user_logged_in');
            localStorage.removeItem('user_username');
            localStorage.removeItem('user_data');
            localStorage.removeItem('user_guest');
            
            window.location.reload();
        }

        // Initialize Google Tag Manager
        window.dataLayer = window.dataLayer || [];
        window.dataLayer.push({
            'event': 'platform_view',
            'page_title': 'VeXachat Platform',
            'language': localStorage.getItem('preferred_language') || 'en'
        });
    </script>
</body>
</html>
